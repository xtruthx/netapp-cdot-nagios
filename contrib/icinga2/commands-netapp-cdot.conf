
/** NETAPP Cdot Plugin Commands
*/
template CheckCommand "netapp-cdot-common" {
    import "plugin-check-command"
    arguments = {
        "--hostname" = {
                value = "$host_query$"
                description = " Hostname / IP of the NetApp filer to monitor"
        }
        "--username" = {
                value = "$netapp_cdot_common_username$"
                description = " The login username of the NetApp filer to monitor"
        }
        "--password" = {
                value = "$netapp_cdot_common_password$"
                description = "The login password of the NetApp filer to monitor"
        }
    }
    vars.host_query = "$host.display_name$"
}

object CheckCommand "check_pacemaker" {
    command = [ "/usr/bin/sudo", PluginDir + "/check_pacemaker" ]
    arguments += {
        "--fail" = "$fail$"
        "--perfdata" = {
            required = true
        }
        "--ring" = {
            required = true
        }
        "--unmanaged" = {
            required = true
        }
    }
}

object CheckCommand "netapp_cdot_volume" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_volume.pl" ]
    env = {
        ICINGA_HOSTDISPLAYNAME = "$host.display_name$"
        ICINGA_HOSTNAME = "$host.name$"
        ICINGA_SERVICEDESC = "$service.name$"
        ICINGA_SERVICEDISPLAYNAME = "$service.display_name$"
    }
    arguments += {
        "--size-warning" = {
                value = "$netapp_cdot_volume_size_warning$"
                description = "The warning threshold for data space usage in %"
        }
        "--size-critical" = {
                value = "$netapp_cdot_volume_size_critical$"
                description = "The critical threshold for data space usage in %"
        }
        "--inode-warning" = {
                value = "$netapp_cdot_volume_inode_warning$"
                description = "The warning threshold for data space usage in %"
        }
        "--inode-critical" = {
                value = "$netapp_cdot_volume_inode_critical$"
                description = "The critical threshold for data space usage in %"
        }
        "--snap-warning" = {
                value = "$netapp_cdot_volume_snap_warning$"
                description = "The warning threshold for data space usage in %"
        }
        "--snap-critical" = {
                value = "$netapp_cdot_volume_snap_critical$"
                description = "The critical threshold for data space usage in %"
        }
        "-V" = {
                value = "$netapp_cdot_volume_vol_name$"
                description = "Optional: The name of the volume to check"
        }
        "-P" = {
                set_if = "$netapp_cdot_volume_perf$"
                description = "Flag for performance data output"
        }
        "--exclude" = {
                value = "$netapp_cdot_volume_exclude$"
                description = "Optional: The name of a volume that has to be excluded from the checks (multiple exclude item for multiple volumes)"
                repeat_key = true
        }
        "--perfdatadir" = {
                value = "$netapp_cdot_volume_perfdatadir$"
                description = "When specified, the performance data are written directly to a file, in the specified location"
        }
        "--perfdataservicedesc" = {
                value = "$netapp_cdot_volume_perfdataservicedesc$"
                description = "Specify additional parameters for output performance data to PNP"
        }

        "--snap-ignore" = {
                set_if = "$netapp_cdot_volume_snapignore$"
                description = "Flag for ignoring snap-size of a volume"
        }
    }
    vars.netapp_cdot_volume_size_warning = 75
    vars.netapp_cdot_volume_size_critical = 90
    vars.netapp_cdot_volume_inode_warning = 65
    vars.netapp_cdot_volume_inode_critical = 85
    vars.netapp_cdot_volume_snap_warning = 75
    vars.netapp_cdot_volume_snap_critical = 90
    vars.netapp_cdot_volume_perf = false
    vars.netapp_cdot_volume_perfdataservicedesc = name
    vars.netapp_cdot_volume_snapignore = true
}

object CheckCommand "netapp_cdot_aggr" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_aggr.pl" ]
    arguments += {
        "--warning" = {
                value = "$netapp_cdot_aggr_warning$"
                description = "The warning threshold for data space usage in %"
        }
        "--critical" = {
                value = "$netapp_cdot_aggr_critical$"
                description = "The critical threshold for data space usage in %"
        }
        "-A" = {
                value = "$netapp_cdot_aggr_aggr_name$"
                description = "Optional: The name of the aggregate to check"
        }
        "-P" = {
                set_if = "$netapp_cdot_aggr_perf$"
                description = "Flag for performance data output"
        }
        "--exclude" = {
                value = "$netapp_cdot_aggr_exclude$"
                description = "Optional: The name of an aggregate that has to be excluded from the checks (multiple exclude item for multiple aggregates)"
                repeat_key = true
        }
    }
    vars.netapp_cdot_aggr_warning = 75
    vars.netapp_cdot_aggr_critical = 90
    vars.netapp_cdot_aggr_perf = false
}

object CheckCommand "netapp_cdot_clusterlinks" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_clusterlinks.pl" ]
}

object CheckCommand "netapp_cdot_diff_snapmirror" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_diff_snapmirror.pl" ]
    arguments += {
        "--exclude" = {
                value = "$netapp_cdot_diff_snapmirror_exclude$"
                description = "Optional: The name of a volume that has to be excluded from the checks (multiple exclude item for multiple volumes)"
                repeat_key = true
        }
        "--regexp" = {
                set_if = "$netapp_cdot_diff_snapmirror_regexp$"
                description = "Optional: Enable regexp matching for the exclusion list"
        }
    }
}

object CheckCommand "netapp_cdot_snapmirror" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_snapmirror.pl" ]
    arguments += {
        "--lag" = {
                value = "$netapp_cdot_snapmirror_lag$"
                description = "Snapmirror delay in seconds. Default 28h"
        }
        "--volume" = {
                value = "$netapp_cdot_snapmirror_volume$"
                description = "Name of the destination volume to be checked. If not specified, check all volumes."
        }
        "--vserver" = {
                value = "$netapp_cdot_snapmirror_vserver$"
                description = "Name of the destination vserver to be checked. If not specificed, search only the base server."
        }
        "--exclude" = {
                value = "$netapp_cdot_snapmirror_exclude$"
                description = "Optional: The name of a volume that has to be excluded from the checks (multiple exclude item for multiple volumes)"
                repeat_key = true
        }
        "--regexp" = {
                set_if = "$netapp_cdot_snapmirror_regexp$"
                description = "Optional: Enable regexp matching for the exclusion list"
        }
    }
    vars.netapp_cdot_snapmirror_lag = 3600*28
}

object CheckCommand "netapp_cdot_disk" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_disk.pl" ]
    arguments += {
        "--disks" = {
                value = "$netapp_cdot_disk_size_warning$"
                description = "Expected number of disks to find"
        }
        "--warning" = {
                value = "$netapp_cdot_disk_warning$"
                description = "The warning threshold for failing disks"
        }
        "--critical" = {
                value = "$netapp_cdot_disk_critical$"
                description = "The critical threshold for failing disks"
        }
        "-P" = {
                set_if = "$netapp_cdot_disk_perf$"
                description = "Flag for performance data output"
        }
    }
    vars.netapp_cdot_disk_warning = 1
    vars.netapp_cdot_disk_critical = 2
    vars.netapp_cdot_disk_perf = false
}

object CheckCommand "netapp_cdot_global" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_global.pl" ]
    arguments += {
        "--plugin" = {
                value = "$netapp_cdot_global_plugin$"
                description = "possible Plugin Names are: 'power', 'fan', 'nvram', 'temp', 'health'"
        }
    }
    vars.netapp_cdot_global_plugin = "health"
}

object CheckCommand "netapp_cdot_interfaces" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_interfaces.pl" ]
}

object CheckCommand "netapp_cdot_multipath" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_multipath.pl" ]
}

object CheckCommand "netapp_cdot_rebuild" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_rebuild.pl" ]
}

object CheckCommand "netapp_cdot_recommendations" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_recommendations.pl" ]
}

object CheckCommand "netapp_cdot_snapshots" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_snapshots.pl" ]
    arguments += {
        "--age" = {
                value = "$netapp_cdot_snapshots_age$"
                description = "Snapshot age in Seconds. Default 90 days"
        }
        "--volume" = {
                value = "$netapp_cdot_snapshots_volume$"
                description = "Name of the single snapshot that has to be checked (useful for check that a snapshot retention works)"
        }
        "--numbersnapshot" = {
                value = "$netapp_cdot_snapshots_numbersnapshot$"
                description = "The number of snapshots that should be present in VOLUME volume (useful for check that a snapshot retention works)"
        }
        "--retentiondays" = {
                value = "$netapp_cdot_snapshots_retentiondays$"
                description = "Snapshot age in days of the newest snapshot in VOLUME volume (useful for check that a snapshot retention works)"
        }
        "--exclude" = {
                value = "$netapp_cdot_snapshots_exclude$"
                description = "Optional: The name of a volume that has to be excluded from the checks (multiple exclude item for multiple volumes)"
                repeat_key = true
        }
        "--regexp" = {
                set_if = "$netapp_cdot_snapshots_regexp$"
                description = "Optional: Enable regexp matching for the exclusion list"
        }
    }
}

object CheckCommand "netapp_cdot_spare_disk" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_sparedisks.pl" ]
}

object CheckCommand "netapp_cdot_lun" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_lun.pl" ]
    arguments = {

        "--size-warning" = {
                value = "$netapp_cdot_lun_size_warning$"
                description = "The Warning threshold in percent for usage?"
        }
        "--size-critical" = {
                value = "$netapp_cdot_lun_size_critical$"
                description = "The Critical threshold in percent for usage?"
        }
        "--volume" = {
                value = "$netapp_cdot_lun_volume$"
                description = "Optional: The name of the Volume where the Luns that need to be checked are located"
        }
        "--vserver" = {
                value = "$netapp_cdot_lun_vserver$"
                description = "Optional: The name of the Vserver where the Luns that need to be checked are located"
        }
        "--perf" = {
                set_if = "$netapp_cdot_lun_perf$"
                description = "Flag for performance data output"
        }
    }
    vars.netapp_cdot_lun_perf = true
    vars.netapp_cdot_lun_size_critical = 95
    vars.netapp_cdot_lun_size_warning = 90
}

object CheckCommand "netapp_cdot_aggrstat" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_aggrstat.pl" ]
    arguments = {
  
        "--state-critical" = {
                value = "$netapp_cdot_aggrstat_state_critical$"
                description = "The Critical threshold state. The default = offline. Possible values are: creating|destroying|failed|frozen|inconsistent|iron_restricted|mounting|online|offline|partial|quiesced|quiescing|restricted|reverted|unknown|unmounted|unmounting|relocating"
        }
        "--aggr" = {
                value = "$netapp_cdot_aggrstat_aggr$"
                description = "Check only specific aggregate"
        }
        "--exlcude" = {
                value = "$netapp_cdot_aggrstat_exclude$"
                description = "Optional: The name of an aggregate that has to be excluded from the checks (multiple exclude item for multiple aggregates)"
        }
        "--perf" = {
                set_if = "$netapp_cdot_aggrstat_perf$"
                description = "Flag for performance data output"
        }
        "--perfdatadir" = {
                value = "$netapp_cdot_aggrstat_perfdatadir$"
                description = "When specified, the performance data are written directly to a file, in the specified location"
        }
        "--perfdataservicedesc" = {
                value = "$netapp_cdot_aggrstat_perfdataservicedesc$"
                description = "Specify additional parameters for output performance data to PNP"
        }
        "--hostdisplay" = {
                value = "$netapp_cdot_aggrstat_hostdisplay$"
        }
    }
    vars.netapp_cdot_aggrstat_perf = true
    vars.netapp_cdot_aggrstat_state_critical = "offline"
}


object CheckCommand "netapp_cdot_volumestat" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_volumestat.pl" ]
    arguments = {

        "--volume" = {
                value = "$netapp_cdot_volumestat_volume$"
                description = "Optional: The name of the Volume where the Luns that need to be checked are located"
        }

        "--exlcude" = {
                value = "$netapp_cdot_volumestat_exclude$"
                description = "Optional: The name of an aggregate that has to be excluded from the checks (multiple exclude item for multiple aggregates)"
        }
        "--vserver" = {
                value = "$netapp_cdot_volumestate_vserver$"
                description = "Optional: The name of the Vserver where the Luns that need to be checked are located"
        }
        "--perf" = {
                set_if = "$netapp_cdot_volumestat_perf$"
                description = "Flag for performance data output"
        }
        "--perfdatadir" = {
                value = "$netapp_cdot_volumestat_perfdatadir$"
                description = "When specified, the performance data are written directly to a file, in the specified location"
        }
        "--perfdataservicedesc" = {
                value = "$netapp_cdot_volumestat_perfdataservicedesc$"
                description = "Specify additional parameters for output performance data to PNP"
        }
        "--hostdisplay" = {
                value = "$netapp_cdot_volumestat_hostdisplay$"
        }
    }
    vars.netapp_cdot_volumestat_perf = true
}

object CheckCommand "check_cdot_lunstat" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_lunstat.pl" ]
    arguments = {

        "--state-non-critical" = {
            value = "$netapp_cdot_lun_state_noncritical$"
            description = "STATE_NON_CRITICAL. The Critical threshold state. The default is:Online."
        }

        "--lun-path" = {
            value = "$netapp_cdot_lun_path$"
            description = "Optional: The path of the LUN to check. Syntax must be /vol/<svm>/lunname"
        }

        "--volume-name" = {
                value = "$netapp_check_cdot_lunstat$"
                description = "Optional: The name of the Volume to check"
        }

        "--exlcude" = {
                value = "$netapp_cdot_lunstat_exclude$"
                description = "Optional: The name of an aggregate that has to be excluded from the checks (multiple exclude item for multiple aggregates)"
        }
        "--vserver" = {
                value = "$netapp_cdot_lunstat_vserver$"
                description = "Optional: The name of the Vserver where the Luns that need to be checked are located"
        }
        "--perf" = {
                set_if = "$netapp_cdot_lunstat_perf$"
                description = "Flag for performance data output"
        }
        "--perfdatadir" = {
                value = "$netapp_cdot_lunstat_perfdatadir$"
                description = "When specified, the performance data are written directly to a file, in the specified location"
        }
        "--perfdataservicedesc" = {
                value = "$netapp_cdot_lunstat_perfdataservicedesc$"
                description = "Specify additional parameters for output performance data to PNP"
        }
        "--hostdisplay" = {
                value = "$netapp_cdot_lunstat_hostdisplay$"
                description = "(only used when using --perfdatadir). Specifies the host name to use for the perfdata. Optional if environment macros are enabled in nagios.cfg/icinga.cfg (enable_environment_macros=1)."

        }
    }
    vars.netapp_cdot_svmstat_perf = true
}

object CheckCommand "check_cdot_svmstat" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_svmstat.pl" ]
    arguments = {

        "--state-warning" = {
            value = "$netapp_cdot_svmstat_warningstate$"
            description = "STATE_WARNING. The Warning threshold state."
        }

        "--exlcude" = {
                value = "$netapp_cdot_svmstat_exclude$"
                description = "Optional: The name of an aggregate that has to be excluded from the checks (multiple exclude item for multiple aggregates)"
        }
        "--vserver" = {
                value = "$netapp_cdot_svmstat_vserver$"
                description = "Optional: The name of the Vserver where the Luns that need to be checked are located"
        }
        "--perf" = {
                set_if = "$netapp_cdot_svmstat_perf$"
                description = "Flag for performance data output"
        }
        "--perfdatadir" = {
                value = "$netapp_cdot_svmstat_perfdatadir$"
                description = "When specified, the performance data are written directly to a file, in the specified location"
        }
        "--perfdataservicedesc" = {
                value = "$netapp_cdot_svmstat_perfdataservicedesc$"
                description = "Specify additional parameters for output performance data to PNP"
        }
        "--hostdisplay" = {
                value = "$netapp_cdot_svmstat_hostdisplay$"
                description = "(only used when using --perfdatadir). Specifies the host name to use for the perfdata. Optional if environment macros are enabled in nagios.cfg/icinga.cfg (enable_environment_macros=1)."

        }
    }
    vars.netapp_cdot_svmstat_perf = true
}

object CheckCommand "check_cdot_volume_autosize" {
    import "netapp-cdot-common"
    command = [ PluginDir + "/netapp-cdot/check_cdot_volume_autosize.pl" ]
    arguments = {

        "--size-warning" = {
                value = "$netapp_cdot_volume_autosize_warning$"
                description = "The warning threshold for data space usage in %"
        }
        "--size-critical" = {
                value = "$netapp_cdot_volume_autosize_critical$"
                description = "The critical threshold for data space usage in %"
        }
        "--inode-warning" = {
                value = "$netapp_cdot_volume_autosize_inode_warning$"
                description = "The warning threshold for data space usage in %"
        }
        "--inode-critical" = {
                value = "$netapp_cdot_volume_autosize_inode_critical$"
                description = "The critical threshold for data space usage in %"
        }
        "--snap-warning" = {
                value = "$netapp_cdot_volume_autosize_snap_warning$"
                description = "The warning threshold for data space usage in %"
        }
        "--snap-critical" = {
                value = "$netapp_cdot_volume_autosize_snap_critical$"
                description = "The critical threshold for data space usage in %"
        }
        "-V" = {
                value = "$netapp_cdot_volume_autosize_vol_name$"
                description = "Optional: The name of the volume to check"
        }
        "-P" = {
                set_if = "$netapp_cdot_volume_autosize_perf$"
                description = "Flag for performance data output"
        }
        "--exclude" = {
                value = "$netapp_cdot_volume_autosize_exclude$"
                description = "Optional: The name of a volume that has to be excluded from the checks (multiple exclude item for multiple volumes)"
                repeat_key = true
        }
        "--perfdatadir" = {
                value = "$netapp_cdot_volume_autosize_perfdatadir$"
                description = "When specified, the performance data are written directly to a file, in the specified location"
        }
        "--perfdataservicedesc" = {
                value = "$netapp_cdot_volume_autosize_perfdataservicedesc$"
                description = "Specify additional parameters for output performance data to PNP"
        }

        "--snap-ignore" = {
                set_if = "$netapp_cdot_volume_autosize_snapignore$"
                description = "Flag for ignoring snap-size of a volume"
        }
    }
    vars.netapp_cdot_volume_autosize_size_warning = 90
    vars.netapp_cdot_volume_autosize_size_critical = 95
    vars.netapp_cdot_volume_autosize_inode_warning = 90
    vars.netapp_cdot_volume_autosize_inode_critical = 95
    vars.netapp_cdot_volume_autosize_snap_warning = 90
    vars.netapp_cdot_volume_autosize_snap_critical = 95
    vars.netapp_cdot_volume_autosize_perf = false
    vars.netapp_cdot_volume_autosize_perfdataservicedesc = name
    vars.netapp_cdot_volume_autosize_snapignore = true
}
